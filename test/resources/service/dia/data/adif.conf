################################################################################
#
# Configration File for ADIF
#
################################################################################

[ADIF]
ACTIVE_STANDBY = false #블록이 ACTIVE-STANDBY 모드로 사용할 것인지 여부. (default:false)
CHECK_OTHERS = true #check_Others함수로 다른 블록이 살아있는지 확인할 것이지 여부. (default:false)
#HEARTBEAT_TIME=0 #주기적인 SAMD hearbeat 체크 주기. 단위 msec (default:1000)
#STAT_SHM=UDRAD_STAT #통계 공유 메모리의 KEY. 없으면 사용 하지 않음. 
#STAT_TIME=5 #통계 수집 주기. 0이면 수집하지 않음. 단위 sec (default: 5)
LOG_FILE = log/ADIF/adif #해당 블록의 기본 로그 파일 위치 및 이름 
#LOG_FORMAT = 0 #블록 기본 로그의 출력 형식. (default: 0x0400BD)
#LOG_FILE_SIZE = 0 #블록 기본 로그의 최대 파일 사이즈. 0이면 무제한. (default:0)
#LOG_FILE_COUNT = 0  #블록 기본 로그가 사이즈별로 나뉠 때 최대 개수. 0이면 무제한. (default:0)
MSG_LOG_FILE = log/ADIF/adifmsg #해당 블록의 메시지 로그 파일  위치 및 이름
#MSG_LOG_FORMAT = 0 #블록 메시지 로그의 출력 형식. (default: 0x040080)
#MSG_LOG_FILE_SIZE = 0 #블록 메시지 로그의 최대 파일 사이즈. 0이면 무제한. (default:0)
#MSG_LOG_FILE_COUNT = 0 #블록 메시지 로그가 사이즈별로 나뉠 때 최대 개수. 0이면 무제한. (default:0)

# LOG FORMAT의 의미 
# 0x000001 : YEAR (YYYY)
# 0x000002 : DATE (MMDD)
# 0x000004 : TIME (HH:MM:SS)
# 0x000008 : MSEC (.MSEC)
# 0x000010 : FILE (DIR/FILE:LINE)
# 0x000020 : LEVEL (log level, ex: [ERRO])
# 0x000040 : DOMAIN (log domain, ex: [UDIA])
# 0x000080 : thread safe flag 
# 0x010000 : 매일 새로운 파일을 생성 - YYYYMMDD
# 0x020000 : 주 단위로 새로운 파일을 생성 - Sun~Sat 
# 0x030000 : 년 단위로 새로운 파일을 생성 - MMDD 
# 0x040000 : 월 단위로 새로운 파일을 생성 - DD ex:1~31 
# 0x050000 : 년 단위로 새로운 파일을 생성 - 1~365 

# DIAMETER INTERFACE 블록의 MSGQ 정보를 설정한다. 
[UDIF/MSGQ]
#PEER_MSGQ = TAGENT # 연동할 상태 PEER MSGQ Id 정보
#MAX_IPC_MSG_SIZE = 20480 # IPC message의 크기. (default :20480)

# DIAMETER INTERFACE 블록의 메시지 DUMP 기능 관련 정보를 설정한다.
[UDIF/MSGDUMP]
#MSG_DUMP = ON #메시지 덤프 기능을 사용할 것인지 여부. (default: off)
#PATH = $(UASYS_HOME)/log/MSGDUMP #메시지 덤프 파일의 위치. (default: $(UASYS_HOME)/log/MSGDUMP) 
#PERIOD = 30 #메시지 덤프 파일 생성 주기. 단위 분 (default: 30)

# DIAMETER INTERFACE 블록의 DIAMETER STACK configuration 정보
[UDIF/DIAMETER]
CONFIG = udia_conf.xml # 사용할 stack configuration 파일 정보. (default: udia_conf.xml) 
#BACKUP = # stack configuraton의 백업 디렉터리 정보. (default: $(UASYS_HOME)/data/udiaconfs/블록명)

# DIAMETER INTERFACE 블록의 WORKER THREAD들에 대한 정보
[UDIF/WORKER]
#THREAD_COUNT = 1 # WORKER THREAD의 개수. 0일 경우 별도의 worker 쓰레드 사용 하지 않음. (default:0) 
THREAD_COUNT = 4 # WORKER THREAD의 개수. 0일 경우 별도의 worker 쓰레드 사용 하지 않음. (default:0) 
#WAIT_LOAD_MSEC = 2000 # 모든 쓰레드가 LOADING 될 때까지 main 쓰레드가 기다리는 최대 시간. 단위 msec. (default:2000) 
USE_STACK_SESSION = FALSE # STACK THREAD에서 SESSION을 사용할 것인지 여부. (default:TRUE) 
USE_STACK_ACTION = FALSE # STACK THREAD에서 ACTION을 사용할 것인지 여부. (default:TRUE)
USE_CHNL_SESSION = FALSE # 채널 THREAD에서 SESSION을 사용할 것인지 여부. (default:TRUE)
USE_CHNL_ACTION = FALSE # 채널 THREAD에서 ACTION을 사용할 것인지 여부. (default:TRUE)

# DIAMETER INTERFACE 블록의 내부 TCP 채널에 대한 정보
[UDIF/CHANNEL]
#MAX_CHANNEL = 64 # 최대 내부 채널의 개수. (default:64)
THREAD_COUNT = 1 # 내부 채널을 관리하기 위한 THREAD의 개수. 0일 경우 main thread에서 관리. (default:0) 
#SO_BUF_SIZE = 0 # 채널 TCP socket send receive buffer size. 0일 경우 system default값 사용. (default:0) 
#DIRECT_SEND = FALSE # 채널 쓰레드로 전달 없이, 각 쓰레드에서 send함수 호출. (default:false).
                 # 사용하면 성능이 더 느려지므로, 가능하면 사용하지 않는 것을 권고
#DEL_WAIT_TIME = 180 # 채널 삭제 후 완벽하게 채널 인스턴스를 제거하기 위해 기다리는 시간. (default: 180)
RECONNECT_TIME = 3 # 채널의 연결이 끊겼을 때 다시 연결을 시도하는 시간. 단위 초. (default:1) 

# DIAMTER INTERFACE 블록 내부 TCP 채널에 대한 연결 정보
# chnl_name: 채널 이름, chnl_id : 채널 ID, mode : 채널 연결 모드 (CLIENT, SERVER)
# pri_ip : primary ip 주소. 설정하지 않으면 0.0.0.0, sec_ip : secondary ip 주소
# maxpeer : 최대 연결 peer 개수 
[UDIF/CHANNEL/CONNECTIONS]
# UDIF channel configuration
# chnl_name; chnl_id; mode; pri_ip; sec_ip; port; maxpeer(opt)
MY_DIAIB; 0; SERVER; 127.0.0.1; ; 30006;


# DIAMTER INTERFACE 블록 내부 TCP 채널에 PEER 정보 
[UDIF/CHANNEL/PEERS]
# chnl_name = peerinfo
#ICHNL_01 = 192.168.1.151;port=9901;rate=50;myhost=0.0.0.0;myport=9903,192.168.1.152;rate=50

# DIAMTER INTERFACE 블록 플러그인 라이브러리에 대한 정보를 설정한다.
# dllname : dll file name, mode : dll 로딩 옵션 (STATIC, DYNAMIC)
# plugin_creator : 플러그인 생성자 함수 이름,
# plugin_commander : 플러그인 adifctrl command 실행 함수 이름
[UDIF/PLUGIN]
# dllname; mode; plugin_creator; plugin_commander
#libadifpxysmsc-3.0.so; DYNAMIC; upxy_proxy_create;
libadifpxy-3.0.so; DYNAMIC; upxy_proxy_create;

# DIAMETER INTERFACE 블록 TRACE 관련 정보를 설정한다.
[UDIF/TRACE]
#ALLKEY = * # all matching trace key 값. (default : *)
#MAX_TRACE =  16 # 최대 등록 가능한 trace key 개수. (default : 16)
#MAX_ALLKEY_TRACE = 0 # all matching trace시 걸리는 trace의 최대 개수. (default: 16)
#PART_MATCH = OFF # key의 일부값만 매치되도 trace할 것인지 여부. (default : off)
TYPE = FILE # trace 출력 타입. (0:OAM, 1:FILE) (default : 0)
#HEADER_FORMAT = */%s/* # trace header format string. (default: */%s/*)
#FILE_FORMAT = $UASYS_HOME/log/TRACE/%f/trace-%K.%Y%m%d # trace 타입이 파일일 경우 출력 파일 포맷

# DIAMETER INTERFACE 블록에서 수행할 ACTION을 설정한다.
# action name : action 이름
# ifkind : 인입 되는 interface의 종류. (STACK, MSGQ) 
# command code : 메시지 command code
# function name : 수행할 action function name
# dll name : 해당 action function을 가진 dll 파일의 이름
# channel info : 해당 interface 채널의 정보
[UDIF/ACTION]
# action name; channel kind; command code; function name; dll name; channel info 
OFR;     STACK; 8388645; upxy_proxy_handle_stack_msg; libadifpxy-3.0.so; 
TFR;     STACK; 8388646; upxy_proxy_handle_stack_msg; libadifpxy-3.0.so; 

# PROXY PLUGIN 공통 configuration 정보를 설정한다. 
[UDIF/PLUGIN/PROXY/COMMON]
#USE_MSG_VALIDATION=YES # 메시지 검증을 수행할 것인지 여부
#USE_CHNL_OTRANSC=NO # 채널 연동 outgoing transaction을 관리할 것인지 여부, default=OFF
#CHNL_RETRANS_COUNT=0 # 채널 연동 outgoing transaction에서 사용할 재전송 회수, default=0
#CHNL_RETRANS_TIMEOUT=0 # 채널 연동 outgoing transaction에서 사용할 재전송 timeout, default=0(사용하지 않음)

# PROXY 스택 상태 체크 정보를 설정한다.
#[UDIF/PLUGIN/PROXY/CHECKER]
#LOG_PATH = log/socket_status/adif.log #채널 및 PEER상태 로그를 출력할 LOG 파일 정보
#NOTI_ON = ON # 연결된 채널에 PEER 상태를 알릴지 여부, default:OFF
#LOG_ON = ON # 로그를 남길지 여부, default:OFF
#PEER_LIFE_ON = ON # peer 생성/소멸 체크할지 여부, default:OFF
#CHNL_LIFE_ON = ON # channel 생성/소멸 체크할지 여부, default:OFF
#USE_PCHCKMSG = OFF # DIAMETER 1.0 peer check message 규겨을 사용할지 여부, default:OFF
#NOTI_CHNLS = ALL # notification을 받을 channel list, ALL일 경우 모두에게 보낸다.

# PROXY 채널 ROUTER 공통 정보를 설정한다.
[UDIF/PLUGIN/PROXY/ROUTER/COMMON]
ROUTE_SCHEME  = RULE # channel routing scheme [0:SESSID, 1:RULE, 2:SUBSID]
#DEFAULT_ROUTE =   #  default routing information

# RULE에 의한 ROUTER일 경우 RULE 정보를 설정한다.
[UDIF/PLUGIN/PROXY/ROUTER/RULE]
#  key-type  : last key type [0:NO KEY, 1:TRCID=SUBSID, 2:SESSID, 3:AVPSTR, 4:AVPINT]
#  key-name  : key name (case key type = TRCID, [0:USERID, 1:MSISDN, 2:IMSI, 3:URI, 4:NAI, 5:PRIV, 6:IP, 7:IPV6])
#  rule-op   : route selecting operation [0:NOTHING, 1:HASHDIV, 2:EQUAL, 3:PREFIX, 4:POSTFIX, 5:HASSTR, 6:REGEXP] 
#  name ; app-id  ; origi-host; peer; server; cmdcode; key-type; key-name; ruleop ; routes(chnl-ids)
RULE_TFR;         ;           ;     ;       ; 8388645;    TRCID;   	MSISDN; POSTFIX; 1

# 해당 RULE-NAME에 대한 라우팅 정보 반환한다. (EQUAL, POSTFIX, PREFIX, HSSTR, REGEXP)
# 다음은 PCRF_S9일 경우 '0으로 끝나는 값은 3과 0 으로 라우트' 라는 의미를 가진다.
[UDIF/PLUGIN/PROXY/ROUTER/RULE/RULE_TFR/ROUTES]
# key ; routes(chnlidx)
0 : 1, 2 
1 : 2, 1 
2 : 1, 2 
3 : 2, 1 
4 : 1, 2 
5 : 2, 1 
6 : 1, 2 
7 : 2, 1 
8 : 1, 2 
9 : 2, 1 
default : 1, 2


# DIAMETER PROXY 플러그인에서 ALARM을 발생할 error answer result-code 값을 설정한다.
#[UDIF/PLUGIN/PROXY/ALARM_ECODE]
# error result code
#4011
#4012
#5030
#4502
#4503
#4504
#5012
